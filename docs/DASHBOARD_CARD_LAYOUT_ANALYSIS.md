# 대시보드 카드 레이아웃 문제 분석

> 분석 대상: **수익/지출 통계**(FinancialStatsCard), **KPI 요약 그래프**(KpiCard)  
> 기준 카드: **시스템 로그**(LogsCard) — "더보기" 위치·하단 갭이 올바른 참조

---

## 1. 수익/지출 통계 — "더보기" 높이 불일치 (2열 레이아웃)

### 현상
- 2열일 때 **시스템 로그**의 "더보기"와 **수익/지출 통계**의 "더보기"가 같은 행에 있어야 하는데, 수익/지출 쪽이 더 아래(카드 하단에 더 가깝게) 보임.
- 즉, 수익/지출 카드의 **내부 하단 갭**이 시스템 로그보다 작게 느껴짐.

### 구조 비교

| 항목 | LogsCard (기준) | FinancialStatsCard |
|------|------------------|--------------------|
| 카드 높이 | `h-[396px]` | `h-[396px]` |
| 레이아웃 | `flex flex-col justify-between` | `flex flex-col justify-between` |
| 패딩 | `p-5 pt-[24px]` | `p-5 pt-[24px]` |
| 콘텐츠 영역 | `flex-1 min-h-0` | `flex-1 min-h-0` |
| **콘텐츠 구조** | **고정**: 타이틀 + `grid-cols-3` + **`grid-rows-4`** (4행 고정) | **가변**: 타이틀 + 요약 3개 + 이번달 요약 + **2열(플랫폼/카테고리)** — 행 수 고정 없음 |
| 하단 영역 | `mt-3 flex-shrink-0` | `mt-3 flex-shrink-0` |

### 원인 정리
1. **콘텐츠 높이 가변성**  
   - LogsCard는 **`grid-rows-4` + 4개 항목**으로 리스트 높이가 항상 동일(4×h-12 + gap).  
   - FinancialStatsCard는 요약 3개 + 이번달 박스 + 플랫폼/카테고리 2열이라, **폭(2열 vs 3열)에 따라 줄바꿈·높이가 달라짐**.  
   - 2열일 때 카드 폭이 줄어들어 블록들이 더 세로로 쌓이면, **콘텐츠 전체 높이가 달라지고**, `flex-1`로 채워지는 영역이 달라짐.
2. **그리드 행 높이와 시각적 정렬**  
   - 같은 그리드 행에서 두 카드가 `align-items: stretch`(기본)로 같은 높이를 가지더라도,  
     **콘텐츠가 짧은 쪽**에서는 "더보기" 위로 빈 공간이 많고, **콘텐츠가 긴 쪽**에서는 "더보기"가 콘텐츠에 더 붙어 보일 수 있음.  
   - 또는 수익/지출 쪽 콘텐츠가 **실제로 396px를 넘어** `overflow-hidden`으로 잘리면서, **footer까지 살짝 잘려 보이거나** 시각적 기준선이 달라질 수 있음.
3. **로딩 상태**  
   - FinancialStatsCard는 `$effect`로 API 호출 후 데이터를 채움. 로딩 중에는 "로딩 중..." 한 줄만 있어 **콘텐츠 높이가 매우 작음**.  
   - 로딩 완료 후 구조가 바뀌면서 레이아웃이 재계산되고, 그 과정에서 **2열일 때만** 다른 카드와 "더보기" 기준선이 어긋나 보일 수 있음.

### 해결 방향 (수정 시 적용)
- **콘텐츠 영역 높이 고정 패턴 통일**  
  - 수익/지출 카드의 "플랫폼별 수익 / 카테고리별 지출" 구간을 **리스트형으로 바꾸고 `grid-rows-4`(또는 고정 행 수)**를 쓰거나,  
  - 해당 구간에 **`min-height`를 두어** 다른 카드의 리스트 영역(4행)과 **같은 높이**로 맞춤.  
  - 이렇게 하면 2열/3열 모두에서 **콘텐츠 블록 높이가 일정**해져 "더보기"가 시스템 로그와 같은 기준선에 맞춰짐.
- **하단 영역 구조 동일화**  
  - footer 래퍼의 `mt-3 flex-shrink-0`와 "더보기" 링크 클래스는 이미 동일하므로, **콘텐츠 높이만 고정**해도 정렬 개선 가능.
- (선택) 로딩 중에도 **플레이스홀더 4행**을 두어 높이를 맞추면, 로딩 전후로도 "더보기" 위치가 흔들리지 않음.

---

## 2. KPI 요약 그래프 — 하단 갭·화면 크기별 여백 불일치

### 현상
- "더보기" **아래 내부 갭**이 다른 카드(시스템 로그 등)와 다르게 보임.
- **화면 크기가 바뀔 때마다** 카드 하단 여백이 달라짐.

### 구조 비교

| 항목 | LogsCard (기준) | KpiCard |
|------|------------------|---------|
| 카드 높이 | **`h-[396px]`** (고정) | **`min-h-[396px]`** (최소만 지정, 내용에 따라 늘어남) |
| 콘텐츠 영역 | `flex-1 min-h-0` | `min-h-0` 만 사용, **`flex-1` 없음** |
| 하단 영역 | `mt-3 flex-shrink-0` | **`mt-auto pt-3 flex-shrink-0`** |

### 원인 정리
1. **카드 높이가 고정이 아님**  
   - KpiCard는 `min-h-[396px]`만 있어 **내용이 많으면 카드 전체 높이가 늘어남**.  
   - 그래프 블록, `lg:` 반응형 블록(추가 KPI, 우측 설명) 등이 **브레이크포인트에 따라 보였다 안 보였다** 하면서 **총 높이가 달라짐**.  
   - 그 결과 **같은 "더보기"인데** 카드 높이가 달라져, **내부 하단 갭(padding-bottom)**은 같아도 **카드 밖으로 보이는 여백**이 달라짐.
2. **콘텐츠가 flex를 채우지 않음**  
   - KpiCard 콘텐츠 래퍼에 `flex-1`이 없어, **남는 공간을 채우지 않고** "콘텐츠 높이만큼만" 차지함.  
   - 그래서 **콘텐츠 양에 따라** 카드 높이와 "더보기"까지의 거리가 달라지고, **다른 카드와 동일한 "고정 396px + 하단 갭"**이 안 맞음.
3. **`mt-auto` 사용**  
   - `mt-auto`로 footer를 "아래로 밀어붙이기"는 하지만, **카드 자체가 늘어나기 때문에** "더보기"의 **절대 위치**가 화면 크기마다 바뀜.  
   - 다른 카드는 **항상 396px + 동일 padding**이라 **내부 하단 갭이 일정**한 반면, KPI만 **카드 높이 가변 → 하단 갭이 달라 보임**.

### 해결 방향 (수정 시 적용)
- **카드 높이 고정**  
  - 규격대로 **KPI만 `h-80`(320px)** 또는 **일반 카드와 동일한 `h-[396px]`**로 **고정 높이**를 줌.  
  - 그러면 다른 카드와 **같은 행/같은 그리드에서** 높이가 맞고, "더보기" 아래까지의 **내부 갭도 동일**해짐.
- **콘텐츠 영역에 flex-1 + min-h-0**  
  - 그래프/숫자 블록을 감싸는 영역에 **`flex-1 min-h-0`**를 주어, **남는 공간을 모두 이 구역이 채우도록** 함.  
  - 그러면 "더보기"는 항상 **카드 하단에서 동일한 padding**으로 고정되고, **화면 크기가 바뀌어도** 카드 높이가 396px(또는 h-80)로 고정되므로 **여백이 일정**해짐.
- **하단 영역 통일**  
  - `mt-auto` 제거하고, LogsCard와 동일하게 **`mt-3 flex-shrink-0`**만 사용.  
  - 카드 높이를 고정하고 콘텐츠를 `flex-1`로 채우면, **mt-auto 없이도** "더보기"가 항상 하단에 붙음.
- (선택) **lg: 보이는 블록**이 있을 때 **높이를 넘지 않도록** `overflow-hidden` + `min-h-0`로 스크롤 또는 잘림 처리하면, 화면 크기별로 카드 높이가 튀는 현상을 막을 수 있음.

---

## 3. 요약 표

| 카드 | 문제 | 구조적 원인 | 수정 방향 |
|------|------|-------------|-----------|
| 수익/지출 통계 | 2열에서 "더보기" 높이 다름 | 콘텐츠가 `grid-rows-4` 같은 고정 높이가 아님, 폭에 따라 높이 변함 | 리스트/요약 구간에 고정 행 또는 min-height로 높이 통일 |
| KPI 요약 그래프 | 하단 갭 다름, 화면 크기마다 여백 변함 | `min-h-[396px]`로 카드가 늘어남, `flex-1` 없음, `mt-auto` 사용 | 카드 `h-80` 또는 `h-[396px]` 고정, 콘텐츠에 `flex-1 min-h-0`, footer는 `mt-3`만 사용 |

---

## 4. 복구 시점 참고
- 수정 전 상태: `backup_guide_sync_2026-01-12/` 또는 현재 Git 워킹 트리.
- 수정 시 카드 컴포넌트만 건드리면 되며, 그리드/페이지 레이아웃은 유지 가능.
