---
description: 
alwaysApply: true
---

---
description: 
alwaysApply: true
---

---
description: SvelteKit + Tailwind 웹 프로젝트 규칙 (Clean Architecture)
globs: src/**/*.svelte, src/**/*.ts, static/**/*
alwaysApply: false
---

당신은 SvelteKit + Tailwind CSS 전문 프론트엔드 개발자입니다. 반드시 Svelte 5, SvelteKit 2, Tailwind v4 최신 기준으로 코딩하세요.

## 🚫 보안 Deny List (자동 승인 안전장치)
사용자의 명시적 확인(Confirm) 없이 아래 행동을 절대 임의로 실행하거나 덮어쓰지 마세요:
- 터미널 금지: `pnpm i`, `pnpm build`, `git push`, `rm -rf node_modules` 및 `rm -rf .svelte-kit`
- 설정 보호: `package.json`, `svelte.config.js`, `vite.config.ts`, `.env*`
- 스타일 보호: `src/app.css` (Tailwind v4 전역 설정 파일) 전체 덮어쓰기 및 초기화 금지
- 로직 보호: `src/routes/` 내의 핵심 페이지나 레이아웃 파일(`.svelte`, `.ts`)을 50줄 이상 삭제/덮어쓰기 할 경우 반드시 변경 이유를 묻고 진행

## 💻 코딩 규칙 및 프레임워크 스펙
- 파일/폴더: snake_case 파일명을 사용하고, `src/routes/[feature]/` 기반의 폴더 구조를 활용하세요.
- Svelte 5 (핵심): 기존 구버전 API(writable 등) 대신 반드시 Svelte 5 Runes (`$state`, `$derived`, `$effect`, `$props`)를 우선적으로 사용하세요.
- 스타일링: Tailwind v4 utility classes만 사용합니다. `<style>` 태그 사용은 엄격히 금지합니다.
- 타입스크립트: TypeScript를 엄격하게 적용하고, `any` 타입 사용은 배제합니다.
- 컴포넌트 분리: UI 렌더링(Component)과 비즈니스 로직(TS/Runes)을 명확히 분리하여 재사용성을 높이세요.

## 🏗️ 아키텍처 (Feature-first)
src/
├── lib/          # 재사용 가능한 컴포넌트, stores, utils
├── routes/
│   └── [feature]/
│       ├── +page.svelte    # 뷰 (UI 렌더링)
│       ├── +page.ts        # 유니버설 로드 함수 (데이터 패칭)
│       └── +page.server.ts # 서버 전용 로직
└── static/       # 정적 에셋 (이미지, 폰트 등)

## 🧪 예외 처리 및 테스트
- 예외 처리: 데이터 페칭 및 로직 처리 시 `Result<Ok, Error>` 패턴을 사용하여 안전하게 에러를 핸들링하세요.
- AI 응답 규칙: 항상 한국어로 친절하게 설명하되, 코드와 변수명은 영어로 작성하세요. 코드는 생략(...) 없이 복사 가능한 완전한 형태로 제공하세요.

# Cursor Rules — Sugar Rush 910

**개발·수정·기능 추가 전 반드시:** `docs/DEVELOPMENT_GUIDELINES.md`를 **먼저 읽고** 따라야 한다. 이렇게 해야 언제 어느 순간 개발해도 일관되고 문제가 나지 않는다. 작업 후에는 해당 문서의 "작업 후 체크리스트"와 점검 절차를 따른다.

---

- Stack: SvelteKit + Tailwind CSS v4 + pnpm workspaces + Pretendard. Icons: lucide-svelte (다운로드 SVG, 텍스트 X, 16px, 컨테이너 24×24).
- 레이아웃: Header 56px 고정, Sidebar 240px 토글, Main 12-col grid. 카드 h-72, KPI만 h-80. Right panel 없음.
- 반응형: <md 1열, md~<lg 2열, ≥lg 3열. 카드당 최대 4행, "더보기" 링크.
- 테마 토글: Lucide **Eclipse** 아이콘 1개. 클릭 시 dark/light 전환. `localStorage('sr_theme')` 사용. 첫 페인트 전 스니펫으로 FOUC 방지.
- 색상/브랜드: 문서의 변수 토큰과 금칙(브랜드색은 로고/악센트 전용, 앨범 대표색 금지) 준수.
- 금칙어: 공개 UI/문서/알림에 "AI" 문자열 금지. 내부 코드/DB에서만 `ai_type` 허용. CI 게이트로 차단.
- 접근성: WCAG 2.2 AA 대비(≥4.5:1), 포커스 링 ≥1.5px, aria-label/aria-live 적용.
- 카드 셋과 링크, API 계약, D1 스키마/라우트, 에러 포맷(ApiErr) 등은 동봉 README의 Appendix A~G를 **정식 계약**으로 따른다.
- **API·보안**: 모든 API는 **외부 노출 금지**. API 키·시크릿·DB 접속 정보는 서버(환경 변수/시크릿)에만 두고, 클라이언트·번들·로그·에러 메시지에 절대 포함하지 않는다. 외부 서비스(번역·결제 등) 호출은 반드시 서버 경유. 인증·권한·입력 검증·레이트 리밋을 철저히 한다.
